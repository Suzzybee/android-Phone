<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="./index.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="./index.css">
</head>
<body>
  <div class="container">
    <div class="speaker"></div>
    <div class="powerbtn">
      <button onclick="power()" style="height: 20vh; background-color: rgb(2, 2, 2);"></button>
    </div>
    <div id="inner-container">
      <img src="./image/battery bar.jpg" alt="" style="width: 10%; position: absolute; z-index: 1; top: 20%; right: 2%;">
      <div class="camera">
        <div class="innercam"></div>
      </div>
      <div id="time"></div>
      <input id="password" type="text" placeholder="Tap here to Unclock">
      <small class="text-danger" id="passwordError"></small>
      <h3 id="emergency">Emergency</h3>
      <div id="password-btn">
        <button onclick="display(1)" class="btn btn-tertiary">1</button>
        <button onclick="display(2)" class="btn btn-tertiary">2</button>
        <button onclick="display(3)" class="btn btn-tertiary">3</button>
        <button onclick="display(4)" class="btn btn-tertiary">4</button>
        <button onclick="display(5)" class="btn btn-tertiary">5</button>
        <button onclick="display(6)" class="btn btn-tertiary">6</button>
        <button onclick="display(7)" class="btn btn-tertiary">7</button>
        <button onclick="display(8)" class="btn btn-tertiary">8</button>
        <button onclick="display(9)" class="btn btn-tertiary">9</button>
        <button onclick="display(0)" class="btn btn-tertiary">0</button>
        <button onclick="display('q')" class="btn btn-tertiary">q</button>
        <button onclick="display('w')" class="btn btn-tertiary">w</button>
        <button onclick="display('e')" class="btn btn-tertiary">e</button>
        <button onclick="display('r')" class="btn btn-tertiary">r</button>
        <button onclick="display('t')" class="btn btn-tertiary">t</button>
        <button onclick="display('y')" class="btn btn-tertiary">y</button>
        <button onclick="display('u')" class="btn btn-tertiary">u</button>
        <button onclick="display('i')" class="btn btn-tertiary">i</button>
        <button onclick="display('o')" class="btn btn-tertiary">o</button>
        <button onclick="display('p')" class="btn btn-tertiary">p</button>
        <button onclick="display('a')" class="btn btn-tertiary">a</button>
        <button onclick="display('s')" class="btn btn-tertiary">s</button>
        <button onclick="display('d')" class="btn btn-tertiary">d</button>
        <button onclick="display('f')" class="btn btn-tertiary">f</button>
        <button onclick="display('g')" class="btn btn-tertiary">g</button>
        <button onclick="display('h')" class="btn btn-tertiary">h</button>
        <button onclick="display('j')" class="btn btn-tertiary">j</button>
        <button onclick="display('k')" class="btn btn-tertiary">k</button>
        <button onclick="display('l')" class="btn btn-tertiary">l</button>
        <button onclick="display('z')" class="btn btn-tertiary">z</button>
        <button onclick="display('x')" class="btn btn-tertiary">x</button>
        <button onclick="display('c')" class="btn btn-tertiary">c</button>
        <button onclick="display('v')" class="btn btn-tertiary">v</button>
        <button onclick="display('b')" class="btn btn-tertiary">b</button>
        <button onclick="display('n')" class="btn btn-tertiary">n</button>
        <button onclick="display('m')" class="btn btn-tertiary">m</button>
        <button onclick="display(' ')" class="btn btn-tertiary">space</button>
        <button onclick="enter()" class="btn btn-tertiary">enter</button>
        <button onclick="display('@')" class="btn btn-tertiary">@</button>
        <button onclick="display('_')" class="btn btn-tertiary">_</button>
        <button class="btn btn-danger" onclick=deleteButton()>âŒ«</button>
      </div>

      <div class="menu-bar">
        <i class="bi bi-list"></i>
        <i class="bi bi-app"></i>
        <i onclick="returnedHomeScreen()" class="bi bi-caret-left"></i>
      </div>

      <div id="icon-bar" class="icon-bar">
        <img src="./image/dial.png" alt="">
        <img src="./image/whatsapp.png" alt="">
        <img onclick="appScreenShow()" src="./image/app-icon.png" alt="">
        <img src="./image/chrome-removebg-preview.png" alt="">
        <img src="./image/camera-removebg-preview.png" alt="" style="margin-right: .5em;">
      </div>
    </div>
    <div id="emergency-screen"></div>
    <div id="appScreen">
      <div class="camera">
        <div class="innercam"></div>
      </div>
      <div class="apps">
        <img src="./image/dial.png" alt="">
        <img src="./image/whatsapp.png" alt="">
        <img src="./image/chrome-removebg-preview.png" alt="">
        <img src="./image/camera-removebg-preview.png">
        <img src="./image/bible.png" alt="">
        <img src="./image/calculator.png" alt="">
        <img onclick="recharged()" src="./image/mtn app.jpg" alt="">
        <img src="./image/google_logo-removebg-preview.png">
        <img onclick="alarmApp()" src="./image/calender.png" alt="">
        <img src="./image/instagram.png" alt="">
        <img src="./image/download.png" alt="">
        <img src="./image/drives.png" alt="">
        <img src="./image/facebook.png" alt="">
        <img src="./image/myapp.jpeg" alt="">
        <img src="./image/twitter.jpeg" alt="">
        <img src="./image/youtube.png" alt="">
        <img src="./image/candy.jpeg" alt="">
      </div>
    </div>
    <!-- alarm -->
    <div id="alarm-container">
      <div id="clock"></div>
      <input onchange="setAlarmTime(value)" type="datetime-local">
      <div class="control">
        <button onclick="setAlarm()" class="button set-alarm">Set alarm</button>
        <button onclick="clearAlarm()" class="button clear-alarm">Stop alarm</button>
      </div>
    </div>

    <!-- rechargedCard -->
    <div id="rechargedCardDiv">
      <main class="d-flex">
        <div class="provider">
          <select class="form-select" name="" id="provider">
            <option value="MTN">MTN</option>
          </select>
        </div>
  
        <div class="price">
          <select class="form-select" name="" id="amount">
            <option value="">Price</option>
            <option value="100">100</option>
            <option value="200">200</option>
            <option value="400">400</option>
            <option value="500">500</option>
            <option value="1000">1000</option>
          </select>
          <button onclick="genAirtime()" class="btn btn-dark">Generate Airtime</button>
  
        </div>
        <!-- <div>
          <h1>MTN Balance: <span id="balMTN"></span></h1>
          <h1>Airtel Balance: <span id="balAirtel"></span></h1>
        </div> -->
      </main>
    
  
    <!-- <div>
      <h2>Load Airtime</h2>
      <input id="loadInput" type="text">
      <button onclick="loadAirtime()">Load airtime</button>
    </div> -->
  
        <div>
          <!-- <h2>All Pins</h2> -->
          <table id="table">
            <thead id="thead">
              <th>Pin</th>
              <th>Status</th>
              <th>Amount</th>
            </thead>
            <tbody id="tbody">
      
            </tbody>
          </table>
        </div>
    </div>
    <!-- dialpad -->
    <!-- <div id="dial-container">
      <input type="text" id="displayDial">
      <div class="dial-Button">
        <button onclick="dialBtn(1)">1</button>
        <button onclick="dialBtn(2)">2</button>
        <button onclick="dialBtn(3)">3</button>
        <button onclick="dialBtn(4)">4</button>
        <button onclick="dialBtn(5)">5</button>
        <button onclick="dialBtn(6)">6</button>
        <button onclick="dialBtn(7)">7</button>
        <button onclick="dialBtn(8)">8</button>
        <button onclick="dialBtn(9)">9</button>
        <button onclick="dialBtn('*')">*</button>
        <button onclick="dialBtn(0)">0</button>
        <button onclick="dialBtn('#')">#</button>
      </div>
      <img src="../javascript-Dugbe/phone/image/dial-icon2-removebg-preview.png" alt="">
    </div> -->
  
  </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script> 
</html>

<script>
let innerContainer = document.getElementById('inner-container')
let passwordButtons = document.getElementById('password-btn')
let password = document.getElementById('password')
let emergency = document.getElementById('emergency')
let emergencyScreen = document.getElementById('emergency-screen')
emergencyScreen.style.display = 'none'
let appScreen = document.getElementById('appScreen')
appScreen.style.display = 'none'
let iconBar = document.getElementById('icon-bar')
iconBar.style.display = 'none'
let menuBar = document.getElementsByClassName('menu-bar')
let passwordError = document.getElementById('passwordError')
let alarmContainer = document.getElementById('alarm-container')
let alarm = document.getElementById('clock') 
let time = document.getElementById('time')
let currentDate = new Date()
let timeOptions = {
  hour:'numeric', 
  minute:'numeric',
  // hour12:true
}
// setInterval(timeOptions, 1000 )

let formattedDateTime = currentDate.toLocaleString(undefined, timeOptions);
time.innerHTML = `<h1>${formattedDateTime}</h1>`
innerContainer.style.display = 'none'

power();
function power(){
  innerContainer.style.display == 'none'
  ?innerContainer.style.display = 'block'
  :innerContainer.style.display = 'none'
}
passwordButtons.style.display = 'none'
emergency.style.display = 'none'

password.addEventListener('click', () =>{
  passwordButtons.style.display = 'block'
  emergency.style.display = 'block'
})
function display(keyPad) {
  password.value += keyPad
}

function deleteButton() {
  password.value = password.value.slice(0,-1)
}
emergency.addEventListener('click', ()=>{
  emergencyScreen.style.display = 'block'
  passwordButtons.style.display = 'none'

})
function enter() { 
  if (password.value == 'suzzy@11') {
   emergency.style.display = 'none'
    passwordButtons.style.display = 'none'
    password.style.display = 'none'
    iconBar.style.display = 'block'
    menuBar.style.display = 'block'

  } else { passwordError = 'try again'
    
  }
  
}
function appScreenShow() {
  appScreen.style.display = 'block'
  menuBar.style.display = 'block'
  iconBar.style.display = 'block'
}

function returnedHomeScreen(){
  appScreenShow();
}

//alarm
alarmContainer.style.display = 'none'

  const audio = new Audio('./audio/alarm-audio.unknown')
  audio.loop = true
  let alarmTime = null
  let alarmTimeOut = null
  // let hour12 = true
  function updateTime() {
    let date = new Date()

    let hour = formatTime(date.getHours())
    let minute = formatTime(date.getMinutes())
    let seconds = formatTime(date.getSeconds())
    alarm.innerHTML = `${hour} : ${minute} : ${seconds}`;
  }
  function formatTime(time) {
    if (time < 10){ 
      return '0' + time;
    }
    return time;
  }
  function setAlarmTime(value) {
    alarmTime = value
    //console.log(alarmTime);
  }
function setAlarm() {
  if (alarmTime){
    let current = new Date()
    let timeToAlarm = new Date(alarmTime)

    if (timeToAlarm > current) {
      let timeOut = timeToAlarm.getTime() - current.getTime();
      alarmTimeOut = setTimeout(() => audio.play(), timeOut)
      alert('Alarm set')
    }
  }
}

function clearAlarm() {
  audio.pause()
  if (alarmTimeOut) {
    clearTimeout(alarmTimeOut)
    // alert('alarm stopped')
  }
}
  setInterval(updateTime, 1000 )
function alarmApp() {
  alarmContainer.style.display = 'block'
}

//rechargecard
let rechargedCardDiv = document.getElementById('rechargedCardDiv')
rechargedCardDiv.style.display = 'none'
let provider = document.getElementById("provider")
  let amount = document.getElementById("amount")
  let pin = ""
  let allPins = []
  let MtnBalance = 0
  let AirtelBalance = 0
  let gottenPin = JSON.parse(localStorage.getItem("card"));
  let loadInput = document.getElementById("loadInput")
  balMTN.innerHTML = MtnBalance;
  balAirtel.innerHTML = AirtelBalance

  function recharged() {
    rechargedCardDiv.style.display = 'block'

  }
  function genAirtime(){
    // [Array(10)].forEach(el=>{
    //      pin += Math.floor(Math.random()*10)
    //     console.log("Hello");
    //     console.log(pin);
    // })
    for (let index = 0; index < Array(15).length; index++) {
      let rand = Math.floor(Math.random()*10)
      pin += rand;
      console.log(rand);
    }
    console.log(pin);
    let card = {
      pin: pin,
      used: 'unused',
      provider: provider.value,
      amount: amount.value
    }
    if(gottenPin == null){
      gottenPin = []
      gottenPin.push(card)
      localStorage.setItem("card", JSON.stringify(gottenPin))
      dispCards()
      pin = ""
    }else{
      gottenPin.push(card)
      localStorage.setItem("card", JSON.stringify(gottenPin))
      dispCards()
      pin = ""
    }
  }

  function dispCards(){
    tbody.innerHTML = "";
    gottenPin.forEach((el, i) => {
      document.getElementById("tbody").innerHTML += `
        <tr>
          <td>
            <input id="copied${i}" value="${el.pin}" style="border: 0; background-color: transparent;"/> 
            <button onclick="copyPin(${i})" class="btn btn-dark">c</button>   
          </td>
          <td>${el.amount}</td>
          <td>${el.used}</td>

        </tr>`
    });
  }
  dispCards()

  function loadAirtime(){
    let found = gottenPin.find((el)=> el.pin == loadInput.value)
    console.log(found);
    if(found.used == 'used'){
      alert("Airtime has already been used")
      return;
    }else if(found.provider == "MTN"){
      found.used = 'used';
      localStorage.setItem("card", JSON.stringify(gottenPin))
      MtnBalance += found.amount
      balMTN.innerHTML = MtnBalance;
      dispCards()
    }

  }

  function copyPin(i){
    let pinVal = document.getElementById(`copied${i}`).value;
    let copyText = document.getElementById(`copied${i}`)
    copyText.select();
    copyText.setSelectionRange(0,9);
    navigator.clipboard.writeText(pinVal);
    alert("Copied")
  }

// dialpad
let displayDial = document.getElementById('displayDial')
let dialContainer = document.getElementById('dial-container')
dialContainer.style.display = 'none'
  function dialBtn(dialKey) {
    displayDial.value += dialKey
  }

</script>